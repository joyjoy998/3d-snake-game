# æ–‡ä»¶å: .github/workflows/deploy.yml
name: Deploy React App to GitHub Pages

# è§¦å‘æ¡ä»¶: åªè¦æœ‰ä»£ç æ¨é€åˆ° main åˆ†æ”¯ï¼Œå°±æ‰§è¡Œè¿™ä¸ªå·¥ä½œæµ
on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    # åœ¨æœ€æ–°çš„ Ubuntu ç¯å¢ƒä¸‹è¿è¡Œ
    runs-on: ubuntu-latest

    steps:
      # 1. æ£€å‡ºä»£ç  (è·å– main åˆ†æ”¯çš„æºç )
      - name: Checkout
        uses: actions/checkout@v4

      # 2. è®¾ç½® Node.js ç¯å¢ƒ
      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: "20.15.0" # ä½¿ç”¨ä¸€ä¸ªåˆé€‚çš„ Node ç‰ˆæœ¬

      # 3. å®‰è£…ä¾èµ–
      - name: Install dependencies ğŸ”§
        run: npm install

      # 4. æ„å»ºé¡¹ç›®
      - name: Build project ğŸ—ï¸
        run: npm run build

      # 5. éƒ¨ç½²åˆ° GitHub Pages
      # æ³¨æ„ï¼šè¿™ä¸ª Action ä¼šè‡ªåŠ¨å¤„ç†å°† /build æ–‡ä»¶å¤¹å†…å®¹æ¨é€åˆ° gh-pages åˆ†æ”¯
      - name: Deploy to GitHub Pages ğŸš€
        uses: peaceiris/actions-gh-pages@v3
        with:
          # GitHub Pages éƒ¨ç½²éœ€è¦çš„ Token
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # æ„å»ºäº§ç‰©æ‰€åœ¨çš„ç›®å½•ï¼Œé€šå¸¸æ˜¯ build
          publish_dir: ./dist
          # éƒ¨ç½²åˆ°å“ªä¸ªåˆ†æ”¯ï¼Œé€šå¸¸æ˜¯ gh-pages
          publish_branch: gh-pages
